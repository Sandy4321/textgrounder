#!/bin/sh

if [ -z "$WG_WIKIPEDIA_DIR" ]; then
  echo "Must set WG_WIKIPEDIA_DIR to location of Wikipedia data files"
  exit 1
fi

if [ -z "$WG_AUX_DIR" ]; then
  echo "Must set WG_AUX_DIR to location of WikiGrounder aux files"
  exit 1
fi

if [ -z "$WG_TWITTER_DIR" ]; then
  echo "WG_TWITTER_DIR should be set to the location of Twitter data files"
  echo "Proceeding, because may not need to use these files"
  WG_TWITTER_DIR="/nonexistent-location/download-wikigrounder-twitter-files-please"
fi

if [ -z "$PCL_TRAVEL_DIR" ]; then
  PCL_TRAVEL_DIR="$PROJECTS_DIR/pcl_travel"
fi

TRCONLL_DEV_DIR="$PCL_TRAVEL_DIR/data/trconlldevtest/dev"

GEOTEXT_CORPUS_TOP="$WG_TWITTER_DIR/GeoText.2010-10-12"
#GEOTEXT_INPUT_DIR="$GEOTEXT_CORPUS_TOP/processed_data"
GEOTEXT_OUTPUT_DIR="$WG_TWITTER_DIR/output-40-docthresh"

DUMP_PREFIX="enwiki-20100905"
if [ -z "$NO_USE_PERMUTED" ]; then
  if [ -e "$WG_WIKIPEDIA_DIR/$DUMP_PREFIX-permuted-pages-articles.xml.bz2" ]; then
    DUMP_PREFIX="$DUMP_PREFIX-permuted"
  fi
fi

PAGES_ARTICLES_PREFIX="$DUMP_PREFIX-pages-articles"

WDIR="$WG_WIKIPEDIA_DIR"
AUXDIR="$WG_AUX_DIR"

ORIG_ARTICLE_DATA_SUFFIX="article-data.txt"
COMBINED_ARTICLE_DATA_SUFFIX="combined-article-data.txt"
COORDS_SUFFIX="coords.txt"
COUNTS_SUFFIX="counts-only-coord-articles.txt"
WORDS_SUFFIX="text.txt"
COORD_WORDS_SUFFIX="text-only-coord-articles.txt"
COORD_WORDS_UNTOK_SUFFIX="text-untok-only-coord-articles.txt"
LINKS_SUFFIX="links-only-coord-articles.txt"
TOPONYM_EVAL_SUFFIX="toponym-eval.txt"
DISAMBIG_ID_SUFFIX="disambig.id.txt"
TITLE2ID_SUFFIX="title2id.txt"
DUMP_SUFFIX="xml.bz2"

OUT_STOPWORDS_FILE="stopwords.english"
OUT_GAZETTEER_FILE="world-dataen-fixed.txt"
OUT_ORIG_ARTICLE_DATA_FILE="$DUMP_PREFIX-$ORIG_ARTICLE_DATA_SUFFIX"
OUT_COMBINED_ARTICLE_DATA_FILE="$DUMP_PREFIX-$COMBINED_ARTICLE_DATA_SUFFIX"
OUT_COORDS_FILE="$DUMP_PREFIX-$COORDS_SUFFIX"
OUT_COUNTS_FILE="$DUMP_PREFIX-$COUNTS_SUFFIX"
OUT_WORDS_FILE="$DUMP_PREFIX-$WORDS_SUFFIX"
OUT_COORD_WORDS_FILE="$DUMP_PREFIX-$COORD_WORDS_SUFFIX"
OUT_COORD_WORDS_UNTOK_FILE="$DUMP_PREFIX-$COORD_WORDS_UNTOK_SUFFIX"
OUT_LINKS_FILE="$DUMP_PREFIX-$LINKS_SUFFIX"
OUT_TOPONYM_EVAL_FILE="$DUMP_PREFIX-$TOPONYM_EVAL_SUFFIX"
OUT_DISAMBIG_ID_FILE="$PAGES_ARTICLES_PREFIX.$DISAMBIG_ID_SUFFIX"
OUT_TITLE2ID_FILE="$PAGES_ARTICLES_PREFIX.$TITLE2ID_SUFFIX"
OUT_DUMP_FILE="$PAGES_ARTICLES_PREFIX.$DUMP_SUFFIX"

IN_STOPWORDS_FILE="$AUXDIR/$OUT_STOPWORDS_FILE"
IN_GAZETTEER_FILE="$AUXDIR/$OUT_GAZETTEER_FILE"
IN_ORIG_ARTICLE_DATA_FILE="$WDIR/$OUT_ORIG_ARTICLE_DATA_FILE"
IN_COMBINED_ARTICLE_DATA_FILE="$WDIR/$OUT_COMBINED_ARTICLE_DATA_FILE"
IN_COORDS_FILE="$WDIR/$OUT_COORDS_FILE"
IN_COUNTS_FILE="$WDIR/$OUT_COUNTS_FILE"
IN_LINKS_FILE="$WDIR/$OUT_LINKS_FILE"
IN_TOPONYM_EVAL_FILE="$WDIR/$OUT_TOPONYM_EVAL_FILE"
IN_DISAMBIG_ID_FILE="$WDIR/$OUT_DISAMBIG_ID_FILE"
IN_TITLE2ID_FILE="$WDIR/$OUT_TITLE2ID_FILE"
IN_DUMP_FILE="$WDIR/$OUT_DUMP_FILE"

STOPWORDS_ARG="--stopwords-file $IN_STOPWORDS_FILE"
GAZETTEER_ARG="--gazetteer-file $IN_GAZETTEER_FILE"
ORIG_ARTICLE_DATA_ARG="--article-data-file $IN_ORIG_ARTICLE_DATA_FILE"
COMBINED_ARTICLE_DATA_ARG="--article-data-file $IN_COMBINED_ARTICLE_DATA_FILE"
COORDS_ARG="--coords-file $IN_COORDS_FILE"
COUNTS_ARG="--counts-file $IN_COUNTS_FILE"
LINKS_ARG="--links-file $IN_LINKS_FILE"
#No TOPONYM_EVAL_ARG; used in --evalfile
DISAMBIG_ID_ARG="--disambig-id-file $IN_DISAMBIG_ID_FILE"
TITLE2ID_ARG="--title2id-file $IN_TITLE2ID_FILE"

# Include local configuration if it exists

if [ -e "$TEXTGROUNDER_PYTHON/local-config" ]; then
  . "$TEXTGROUNDER_PYTHON/local-config"
fi

